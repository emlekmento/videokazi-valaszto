<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <title>Eml√©kment≈ë Kalkul√°tor</title>
    <style>
        body { font-family: sans-serif; margin: 0; padding: 20px; background: white; color: #333; overflow-x: hidden; }
        .wizard-container { max-width: 800px; margin: 0 auto; }
        .step { display: none; animation: fadeIn 0.4s; text-align: center; }
        .active { display: block; }
        
        /* K√°rty√°k */
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 20px; margin-top: 20px; }
        .card { height: 250px; perspective: 1000px; cursor: pointer; }
        .card-inner { position: relative; width: 100%; height: 100%; transition: transform 0.6s; transform-style: preserve-3d; }
        .card.flipped .card-inner { transform: rotateY(180deg); }
        .front, .back { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; border: 1px solid #ddd; border-radius: 12px; padding: 15px; box-sizing: border-box; display: flex; flex-direction: column; justify-content: center; align-items: center; background: white; }
        .back { transform: rotateY(180deg); background: #fdf7fc; border-color: #a34e98; }
        
        .kazi-img { max-width: 80%; height: auto; margin-bottom: 10px; }
        .btn { background: #a34e98; color: white; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 1em; margin-top: 10px; }
        .btn-green { background: #28a745; }
        
        input { width: 100%; max-width: 300px; padding: 12px; margin: 10px 0; border: 1px solid #ccc; border-radius: 6px; font-size: 1em; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

<div class="wizard-container">
    <div id="step1" class="step active">
        <h2 style="color:#a34e98;">Milyen kazett√°d van?</h2>
        <p>Kattints a k√°rty√°ra a r√©szletek√©rt!</p>
        <div class="grid">
            <div class="card" onclick="this.classList.toggle('flipped')">
                <div class="card-inner">
                    <div class="front">
                        <img src="https://www.emlekmento.com/shop_ordered/2443/shop_alt_pic/video_tipusok3.png" class="kazi-img">
                        <strong>VHS</strong>
                    </div>
                    <div class="back">
                        <p>M√©ret: 18,7√ó10,3 cm</p>
                        <button class="btn" onclick="event.stopPropagation(); nextStep(2, 'VHS', 3)">Kisz√°molom!</button>
                    </div>
                </div>
            </div>
            <div class="card" onclick="this.classList.toggle('flipped')">
                <div class="card-inner">
                    <div class="front">
                        <img src="https://www.emlekmento.com/shop_ordered/2443/shop_alt_pic/video_tipusok3.png" class="kazi-img">
                        <strong>Hi8 / Video8</strong>
                    </div>
                    <div class="back">
                        <p>M√©ret: 9,5√ó6,2 cm</p>
                        <button class="btn" onclick="event.stopPropagation(); nextStep(2, 'Hi8', 1.5)">Kisz√°molom!</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="step2" class="step">
        <h2 style="color:#a34e98;">Kalkul√°tor megnyit√°sa</h2>
        <p>A(z) <strong id="display-type"></strong> kazett√°khoz tartoz√≥ elemz√©shez add meg az adataidat:</p>
        <form id="lmForm">
            <input type="text" id="name" placeholder="Keresztn√©v" required><br>
            <input type="email" id="email" placeholder="Email c√≠m" required><br>
            <button type="button" class="btn btn-green" onclick="submitForm()">MEGNYITOM A KALKUL√ÅTORT</button>
        </form>
    </div>

    <div id="step3" class="step">
        <h2 style="color:#a34e98;">Eml√©kment≈ë Kalkul√°tor</h2>
        <div style="background:#f9f9f9; padding:20px; border-radius:15px; border:1px solid #ddd;">
            <p>Kiv√°lasztott t√≠pus: <strong id="final-type"></strong></p>
            <label>H√°ny darab van?</label><br>
            <input type="number" id="qty" value="1" min="1" oninput="calculate()" style="width:80px; text-align:center;"><br>
            <p style="font-size:1.5em;">Becs√ºlt id≈ë: <strong id="result">0</strong> √≥ra</p>
            <hr>
            <p>üîé <strong>Tipp:</strong> N√©zd meg a kazetta ablak√°t, ha feh√©r foltokat l√°tsz rajta, az pen√©sz!</p>
            <button class="btn" onclick="location.reload()" style="background:#666;">Vissza az elej√©re</button>
        </div>
    </div>
</div>

<script>
    let currentKazi = "";
    let baseHours = 0;

    function nextStep(step, name, hours) {
        if(name) {
            currentKazi = name;
            baseHours = hours;
            document.getElementById('display-type').innerText = name;
            document.getElementById('final-type').innerText = name;
        }
        document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
        document.getElementById('step' + step).classList.add('active');
    }

    function calculate() {
        let q = document.getElementById('qty').value;
        document.getElementById('result').innerText = (q * baseHours).toFixed(1);
    }

    function submitForm() {
        const name = document.getElementById('name').value;
        const email = document.getElementById('email').value;
        if(!name || !email) { alert("K√©rlek t√∂ltsd ki a mez≈ëket!"); return; }

        // LISTAMESTER BEK√úLD√âS H√ÅTT√âRBEN
        const formData = new FormData();
        formData.append('LM_GroupID', '114321');
        formData.append('LM_FormID', '21677');
        formData.append('LM_Name114321', name);
        formData.append('LM_Email114321', email);
        formData.append('LM_Answer292872', currentKazi); // Rejtett adat: T√≠pus

        fetch('https://listamester.hu/restApi/srv/processSubscription', {
            method: 'POST',
            body: formData,
            mode: 'no-cors' // Listamester korl√°t miatt sz√ºks√©ges
        });

        nextStep(3);
        calculate();
    }
</script>
</body>
</html>
